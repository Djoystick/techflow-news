<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechFlow - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì∞</text></svg>">
</head>
<body>
    <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
    <header>
        <div class="container">
            <div class="logo">
                üì∞ TechFlow
            </div>
            <nav>
                <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="#news">–ù–æ–≤–æ—Å—Ç–∏</a>
                <a href="#about">–û —Å–∞–π—Ç–µ</a>
                <a href="admin.html" class="admin-btn">üîê –ê–¥–º–∏–Ω</a>
            </nav>
        </div>
    </header>

    <!-- –ì–õ–ê–í–ù–ê–Ø –°–ï–ö–¶–ò–Ø -->
    <section class="hero">
        <div class="container">
            <h1>üì° TechFlow</h1>
            <p>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="document.getElementById('news').scrollIntoView({behavior:'smooth'})">–ß–∏—Ç–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏</button>
                <a href="admin.html" class="btn btn-secondary">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a>
            </div>
        </div>
    </section>

    <!-- –û–°–ù–û–í–ù–ê–Ø –ß–ê–°–¢–¨ -->
    <main id="news" class="container" style="margin: 40px auto;">
        <!-- –§–ò–õ–¨–¢–†–´ -->
        <div style="margin-bottom: 40px;">
            <h2 style="margin-bottom: 20px;">üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
            <div class="categories">
                <button class="category-btn active" data-category="all" onclick="filterByCategory('all')">üì∞ –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏</button>
                <button class="category-btn" data-category="ai" onclick="filterByCategory('ai')">ü§ñ –ò–ò</button>
                <button class="category-btn" data-category="gadgets" onclick="filterByCategory('gadgets')">üì± –ì–∞–¥–∂–µ—Ç—ã</button>
                <button class="category-btn" data-category="software" onclick="filterByCategory('software')">üíª –ü–û</button>
                <button class="category-btn" data-category="hardware" onclick="filterByCategory('hardware')">üîß –ñ–µ–ª–µ–∑–æ</button>
                <button class="category-btn" data-category="crypto" onclick="filterByCategory('crypto')">üí∞ –ö—Ä–∏–ø—Ç–æ</button>
            </div>
        </div>

        <!-- –£–ü–†–ê–í–õ–ï–ù–ò–ï –í–ò–î–û–ú -->
        <div class="news-header">
            <h2>üì∞ –ù–æ–≤–æ—Å—Ç–∏</h2>
            <div class="view-toggle">
                <button class="view-btn active" title="–°–µ—Ç–∫–∞" onclick="toggleView('grid')">‚äû</button>
                <button class="view-btn" title="–°–ø–∏—Å–æ–∫" onclick="toggleView('list')">‚â°</button>
            </div>
        </div>

        <!-- –°–ï–¢–ö–ê –ù–û–í–û–°–¢–ï–ô -->
        <div class="news-grid" id="newsGrid">
            <p style="grid-column: 1/-1; text-align: center; color: #999;">–ó–∞–≥—Ä—É–∂–∞—é –Ω–æ–≤–æ—Å—Ç–∏...</p>
        </div>
    </main>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ù–û–í–û–°–¢–ò -->
    <div id="newsModal" class="modal">
        <div class="modal-content">
            <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
            <button class="modal-close" onclick="closeModal()" title="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            
            <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
            <div id="modalNewsImage" style="margin-bottom: 20px;">
                <img id="modalImage" src="" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏" 
                     style="width: 100%; height: auto; border-radius: 8px; max-height: 400px; object-fit: cover;">
            </div>
            
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <h2 id="modalTitle" style="color: #333; margin: 0 0 15px 0; font-size: 24px;"></h2>
            
            <!-- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ -->
            <div style="display: flex; gap: 20px; margin-bottom: 20px; font-size: 12px; color: #999; flex-wrap: wrap;">
                <span style="display: flex; align-items: center; gap: 5px;">
                    üìÖ <span id="modalDate"></span>
                </span>
                <span style="display: flex; align-items: center; gap: 5px;">
                    üë§ <span id="modalAuthor"></span>
                </span>
                <span style="display: flex; align-items: center; gap: 5px;">
                    üìÅ <span id="modalCategory"></span>
                </span>
            </div>
            
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
            <div id="modalBody" style="line-height: 1.8; color: #555; margin-bottom: 25px; font-size: 15px;"></div>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ -->
            <a id="modalSource" href="#" target="_blank" 
               style="display: inline-block; padding: 12px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 6px; text-decoration: none; font-size: 14px; font-weight: 600; transition: all 0.3s; cursor: pointer;">
                üîó –ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚Üí
            </a>

            <!-- –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò -->
            <div class="comments-section" style="margin-top: 30px; background: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid #f0f0f0;">
                <h3 style="color: #333; margin-bottom: 20px;">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
                
                <!-- –§–æ—Ä–º–∞ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
                <div class="comment-input" style="margin-bottom: 20px;">
                    <input type="text" id="commentAuthor" placeholder="–í–∞—à–µ –∏–º—è..." style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                    <button onclick="postComment()" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
                <div id="commentsList" style="max-height: 300px; overflow-y: auto;"></div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer style="margin-top: 60px;">
        <div class="container">
            <p>&copy; 2025 TechFlow. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <p>
                <a href="admin.html">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a> | 
                <a href="404.html">–û —Å–∞–π—Ç–µ</a> | 
                <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            </p>
            <p style="font-size: 12px; color: #999; margin-top: 15px;">
                –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="lastUpdate"></span>
            </p>
        </div>
    </footer>

    <!-- –°–ö–†–ò–ü–¢–´ -->
    <script src="assets/js/app.js"></script>
    <script>
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        document.getElementById('lastUpdate').textContent = new Date().toLocaleString();

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∏–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function postComment() {
            const newsId = document.getElementById('newsModal').dataset.newsId;
            const author = document.getElementById('commentAuthor').value.trim();
            const text = document.querySelector('.comment-input input:last-of-type')?.value || '';
            
            if (!author || !text) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ –∏–º–µ–Ω–∏ –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π');
                return;
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            if (!allComments[newsId]) {
                allComments[newsId] = [];
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
            const comment = {
                id: 'comment-' + Date.now(),
                author: author,
                text: text,
                date: new Date().toLocaleString('ru-RU'),
                likes: 0
            };

            allComments[newsId].push(comment);
            console.log('‚úÖ Comment added:', comment);

            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            displayCommentsInModal(newsId);

            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('commentAuthor').value = '';
            document.querySelector('.comment-input input:last-of-type').value = '';
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
        function displayCommentsInModal(newsId) {
            const commentsList = document.getElementById('commentsList');
            const comments = allComments[newsId] || [];

            if (comments.length === 0) {
                commentsList.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –µ—â–µ –Ω–µ—Ç. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!</p>';
                return;
            }

            commentsList.innerHTML = comments.map(comment => `
                <div class="comment" style="border-bottom: 1px solid #e0e0e0; padding: 12px 0;">
                    <div class="comment-author" style="font-weight: 600; color: #333; font-size: 13px;">${comment.author}</div>
                    <div class="comment-text" style="color: #666; font-size: 13px; margin: 6px 0; line-height: 1.5;">${comment.text}</div>
                    <div class="comment-time" style="font-size: 11px; color: #999;">${comment.date}</div>
                </div>
            `).join('');
        }

        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é openNewsModal —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å ID –Ω–æ–≤–æ—Å—Ç–∏
        const originalOpenNewsModal = window.openNewsModal;
        window.openNewsModal = function(newsId) {
            document.getElementById('newsModal').dataset.newsId = newsId;
            
            const news = allNews.find(n => n.id === newsId);
            if (!news) return;

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
            document.getElementById('modalTitle').textContent = news.title;
            document.getElementById('modalDate').textContent = news.date || new Date().toLocaleDateString();
            document.getElementById('modalAuthor').textContent = news.author;
            document.getElementById('modalCategory').textContent = getCategoryEmoji(news.category) + ' ' + news.category;
            document.getElementById('modalBody').innerHTML = news.fullText || news.excerpt;
            document.getElementById('modalImage').src = news.image;
            document.getElementById('modalSource').href = news.source;

            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            displayCommentsInModal(newsId);

            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.getElementById('newsModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        };
    </script>
</body>
</html>
