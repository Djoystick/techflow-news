<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechFlow - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="admin-page">
    <div class="admin-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="admin-header">
            <h1>üîê TechFlow - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h1>
            <a href="index.html" class="btn btn-secondary">‚Üê –ù–∞ —Å–∞–π—Ç</a>
        </header>

        <!-- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã) -->
        <div id="loginSection" class="login-section">
            <div class="login-box">
                <h2>–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç—è–º–∏</p>
                <form onsubmit="login(event)">
                    <input 
                        type="password" 
                        id="passwordInput" 
                        class="form-control" 
                        placeholder="–ü–∞—Ä–æ–ª—å"
                        required
                    >
                    <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
                </form>
                <div id="loginError" class="error-message hidden"></div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
        <div id="adminPanel" class="admin-panel hidden">
            <!-- –í–∫–ª–∞–¥–∫–∏ -->
            <div class="admin-tabs">
                <button class="tab-btn active" onclick="switchTab('add')">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</button>
                <button class="tab-btn" onclick="switchTab('edit')">‚úèÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏</button>
                <button class="tab-btn" onclick="switchTab('template')">üìã –®–∞–±–ª–æ–Ω—ã</button>
                <button class="tab-btn" onclick="switchTab('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ 1: –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å -->
            <div id="addTab" class="tab-content active">
                <div class="form-section">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –Ω–æ–≤–æ—Å—Ç—å</h2>
                    <form id="newsForm" onsubmit="publishNews(event)">
                        <div class="form-group">
                            <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ *</label>
                            <input 
                                type="text" 
                                id="newsTitle" 
                                class="form-control" 
                                placeholder="–¢–æ—á–Ω—ã–π –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫"
                                maxlength="200"
                                required
                            >
                            <small>–ú–∞–∫—Å–∏–º—É–º 200 —Å–∏–º–≤–æ–ª–æ–≤</small>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                                <select id="newsCategory" class="form-control" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é...</option>
                                    <option value="ai">ü§ñ –ò–ò –∏ Machine Learning</option>
                                    <option value="gadgets">üì± –ì–∞–¥–∂–µ—Ç—ã –∏ —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ã</option>
                                    <option value="software">üíª –ü–û –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</option>
                                    <option value="hardware">üîß –ñ–µ–ª–µ–∑–æ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</option>
                                    <option value="crypto">üí∞ –ö—Ä–∏–ø—Ç–æ –∏ –±–ª–æ–∫—á–µ–π–Ω</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–ò–∑–±—Ä–∞–Ω–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å?</label>
                                <input type="checkbox" id="newsFeatured" class="form-checkbox">
                                <small>–ë—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∞ –≤ —Ç–æ–ø–µ</small>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (–∞–Ω–æ–Ω—Å) *</label>
                            <textarea 
                                id="newsExcerpt" 
                                class="form-control" 
                                placeholder="1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∞–Ω–æ–Ω—Å–∞"
                                maxlength="300"
                                rows="3"
                                required
                            ></textarea>
                            <small id="excerptCount">0/300</small>
                        </div>

                        <div class="form-group">
                            <label>–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏ *</label>
                            <textarea 
                                id="newsFullText" 
                                class="form-control" 
                                placeholder="–ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç—å—è —Å –¥–µ—Ç–∞–ª—è–º–∏..."
                                rows="10"
                                required
                            ></textarea>
                            <small>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</small>
                        </div>

                        <div class="form-group">
                            <label>URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                            <input 
                                type="url" 
                                id="newsImage" 
                                class="form-control" 
                                placeholder="https://example.com/image.jpg"
                            >
                            <small>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 1200x600px</small>
                            <div id="imagePreview" class="image-preview hidden">
                                <img id="previewImg" src="" alt="Preview">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–ò—Å—Ç–æ—á–Ω–∏–∫ (—Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª)</label>
                            <input 
                                type="url" 
                                id="newsSource" 
                                class="form-control" 
                                placeholder="https://source.com/article"
                            >
                        </div>

                        <div class="form-group">
                            <label>–ê–≤—Ç–æ—Ä</label>
                            <input 
                                type="text" 
                                id="newsAuthor" 
                                class="form-control" 
                                placeholder="–í–∞—à–µ –∏–º—è –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è"
                                value="TechFlow"
                            >
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-large">üöÄ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å</button>
                            <button type="reset" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ 2: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏ -->
            <div id="editTab" class="tab-content">
                <div class="management-section">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏</h2>
                    <div class="management-controls">
                        <input 
                            type="text" 
                            id="searchManagement" 
                            class="form-control" 
                            placeholder="–ü–æ–∏—Å–∫ –Ω–æ–≤–æ—Å—Ç–∏..."
                            style="max-width: 300px;"
                        >
                    </div>
                    <div id="newsList" class="news-list"></div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ 3: –®–∞–±–ª–æ–Ω—ã -->
            <div id="templateTab" class="tab-content">
                <div class="template-section">
                    <h2>–®–∞–±–ª–æ–Ω—ã –Ω–æ–≤–æ—Å—Ç–µ–π</h2>
                    <p class="info-box">–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã</p>
                    
                    <div class="templates-grid">
                        <div class="template-card" onclick="loadTemplate('ai-breakthrough')">
                            <h3>ü§ñ –ü—Ä–æ—Ä—ã–≤ –≤ –ò–ò</h3>
                            <p>–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö –≤ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–µ</p>
                        </div>
                        <div class="template-card" onclick="loadTemplate('gadget-review')">
                            <h3>üì± –û–±–∑–æ—Ä –≥–∞–¥–∂–µ—Ç–∞</h3>
                            <p>–®–∞–±–ª–æ–Ω –¥–ª—è –æ–±–∑–æ—Ä–æ–≤ –Ω–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤</p>
                        </div>
                        <div class="template-card" onclick="loadTemplate('market-analysis')">
                            <h3>üìä –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞</h3>
                            <p>–®–∞–±–ª–æ–Ω –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ç–∞—Ç–µ–π –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º —Ä—ã–Ω–∫–µ</p>
                        </div>
                        <div class="template-card" onclick="loadTemplate('security-update')">
                            <h3>üîí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
                            <p>–®–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π –æ–± —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="settingsTab" class="tab-content">
                <div class="settings-section">
                    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    
                    <div class="settings-block">
                        <h3>GitHub –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</h3>
                        <div class="form-group">
                            <label>GitHub Token</label>
                            <input 
                                type="password" 
                                id="githubToken" 
                                class="form-control" 
                                placeholder="ghp_xxxx..."
                            >
                            <small>–¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞</small>
                        </div>
                    </div>

                    <div class="settings-block">
                        <h3>–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                        <button class="btn btn-secondary" onclick="backupData()">üíæ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (JSON)</button>
                        <button class="btn btn-secondary" onclick="exportCSV()">üìä –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ CSV</button>
                    </div>

                    <div class="settings-block">
                        <h3>–û–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
                        <button class="btn btn-danger" onclick="if(confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏!')) clearAllComments()">
                            ‚ö†Ô∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                        </button>
                    </div>

                    <div class="settings-block">
                        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div class="stats-grid">
                            <div class="stat">
                                <div class="stat-number" id="totalNews">0</div>
                                <div class="stat-label">–í—Å–µ–≥–æ –Ω–æ–≤–æ—Å—Ç–µ–π</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number" id="totalComments">0</div>
                                <div class="stat-label">–í—Å–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</div>
                            </div>
                            <div class="stat">
                                <div class="stat-number" id="lastUpdate">-</div>
                                <div class="stat-label">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-block">
                        <h3>–í—ã—Ö–æ–¥</h3>
                        <button class="btn btn-secondary" onclick="logout()">üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notification hidden" id="notification"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div class="modal hidden" id="editModal">
        <div class="modal-overlay" onclick="closeEditModal()"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å</h2>
                <button class="modal-close" onclick="closeEditModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <form id="editForm" onsubmit="updateNews(event)">
                    <input type="hidden" id="editNewsId">
                    
                    <div class="form-group">
                        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                        <input type="text" id="editTitle" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="editExcerpt" class="form-control" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label>–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç</label>
                        <textarea id="editFullText" class="form-control" rows="8"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="assets/js/utils.js"></script>
    <script src="assets/js/storage.js"></script>
    <script src="assets/js/admin.js"></script>
</body>
</html>